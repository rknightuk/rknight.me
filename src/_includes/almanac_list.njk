{% set datePrinted = false %}
{% set currentYear = 1000 %}

<div class="almanac-list">
    
{%- for post in collections[almanacCollection] %}
    {% set postYear = post.data.date.getFullYear() %}

    {% if postYear != currentYear %}
        <h3>{{ postYear }}</h3>
    {% endif %}

    <div class="entryitem">
        <div class="entryitem--data">
            <span>{{ post.data.mediaType | getTypeEmoji }} <a href="{{ post.data.permalink | stripIndex }}">{{ post.data.title }}</a></span>
            <hr>
            <span class="entryitem--date">{{ post.data.date.toISOString() | isoDateOnly }}</span>
        </div>
    </div>

    {% set currentYear = postYear %}
{% endfor %}

</div>